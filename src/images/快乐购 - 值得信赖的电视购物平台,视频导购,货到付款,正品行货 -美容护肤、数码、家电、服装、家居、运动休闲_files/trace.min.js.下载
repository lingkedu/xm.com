function trace_main(strp,strv){var sa="KLGPortal";var sver="";var sguid=getCookie("traceguid");if(sguid!=""&&sguid!=null){var svid=sguid;if(typeof(WEB_CUST_NO)=="undefined"){var smid=""}else{var smid=WEB_CUST_NO}setCookie("tracecustno",smid);var st=String(Math.round(new Date().getTime()/1000));var sp=strp;var sv=strv;var shmsc=getCookie("cpsid");var surl=window.location.href.replace(/&/g,";amp;");var ssrc="https://trace.happigo.com/pv.gif";var iscontaintest=sguid.indexOf("webportal")==-1?false:true;if(iscontaintest==false){setCookie("traceguid",sguid);svid="webportal"+sguid}$.ajax({type:"GET",async:false,timeout:1000,jsonp:"callbackparam",jsonpCallback:"success",dataType:"jsonp",url:ssrc,data:{"a":sa,"ver":sver,"vid":svid,"mid":smid,"t":st,"p":sp,"v":sv,"hmsc":shmsc,"url":surl},success:function(json){},error:function(json){},complete:function(XMLHttpRequest,status){if(status=="timeout"){}}})}else{if(sguid==""||sguid==null){sguid=Guid.NewGuid();setCookie("traceguid",sguid)}}}function tracesearch(key){var sa="KLGPortal";var sguid=getCookie("traceguid");if(sguid==""||sguid==null){sguid=Guid.NewGuid();setCookie("traceguid",sguid)}else{sguid=getCookie("traceguid")}var svid=sguid;if(typeof(WEB_CUST_NO)=="undefined"){var smid=""}else{var smid=WEB_CUST_NO}var skw=key;var ssrc="https://trace.happigo.com/search.gif";var iscontaintest=sguid.indexOf("webportal")==-1?false:true;if(iscontaintest==false){setCookie("traceguid",sguid);svid="webportal"+sguid}$.ajax({type:"GET",async:false,timeout:1000,jsonp:"callbackparam",jsonpCallback:"success",dataType:"jsonp",url:ssrc,data:{"a":sa,"vid":svid,"mid":smid,"skw":skw},success:function(json){},error:function(json){},complete:function(XMLHttpRequest,status){if(status=="timeout"){}}})}function tracecart(gid,num){var sa="KLGPortal";var sguid=getCookie("traceguid");if(sguid==""||sguid==null){sguid=Guid.NewGuid();setCookie("traceguid",sguid)}else{sguid=getCookie("traceguid")}var svid=sguid;if(typeof(WEB_CUST_NO)=="undefined"){var smid=""}else{var smid=WEB_CUST_NO}var sgid=gid;var snum=num;if(snum>0){var sp="good"}else{var sp="goodDetail"}var ssrc="https://trace.happigo.com/sc.gif";var surl=window.location.href.replace(/&/g,";amp;");var iscontaintest=sguid.indexOf("webportal")==-1?false:true;if(iscontaintest==false){setCookie("traceguid",sguid);svid="webportal"+sguid}$.ajax({type:"GET",async:false,timeout:1000,jsonp:"callbackparam",jsonpCallback:"success",dataType:"jsonp",url:ssrc,data:{"a":sa,"vid":svid,"mid":smid,"scgid":sgid,"scgq":snum,"p":sp,"url":surl},success:function(json){},error:function(json){},complete:function(XMLHttpRequest,status){if(status=="timeout"){}}})}function htmlencode(str){str=str.replace(/&/g,"amp;");str=str.replace(/</g,"lt;");str=str.replace(/>/g,"gt;");str=str.replace(/(?:t| |v|r)*n/g,"<br />");str=str.replace(/  /g,"nbsp; ");str=str.replace(/t/g,"nbsp; nbsp; ");str=str.replace(/x22/g,"quot;");str=str.replace(/x27/g,"#39;");return str}function getCookie(name){var strCookie=document.cookie;var arrCookie=strCookie.split("; ");for(var i=0;i<arrCookie.length;i++){var arr=arrCookie[i].split("=");if(arr[0]==name){return arr[1]}}return""}function setCookie(name,value,day){if(name=="traceguid"){value="webportal"+value}var Days=day?day:99999;var exp=new Date();exp.setTime(exp.getTime()+Days*24*60*60*1000);document.cookie=name+"="+escape(value)+";domain=.happigo.com;expires="+exp.toGMTString()+";path=/"}function getSur(url){var strs=url.split("/");var rstr=new Array();if(strs[2].split(".")[0]=="mall"){var Request=new Object();Request=GetRequest();rstr[0]=Request["act"];rstr[1]=Request["op"];if(rstr[0]==""&&rstr[1]==""&&strs[0]!="undefined"&&strs[0]!=null&&strs[1]!="undefined"&&strs[1]!=null){if(strs[3]!=""){rstr[0]="mall_good";rstr[1]=strs[3].split["_"][1].split["."][0]}else{rstr[0]="mall_home"}}}else{if(strs[2].split(".")[0]=="zt"){rstr[0]="zt";rstr[1]=strs[strs.length-1].split(".")[0]}else{if(strs[3]=="sc"){rstr[0]="activity";rstr[1]=strs[4]}else{if(strs[4]!=""&&strs[4]!="undefined"&&strs[4]!=null){if(strs[4].indexOf("?")>0){rstr[0]=strs[3]}else{rstr[0]=strs[4]}}else{if(strs[3]!=""&&strs[4]!="undefined"&&strs[4]!=null){rstr[0]=strs[3]}else{rstr[0]="index"}}rstr[1]="";if(strs[strs.length-1]!=""&&strs[strs.length-1]!="undefined"&&strs[strs.length-1]!=null){var nstr=strs[strs.length-1].split(".")[0];if(!isNaN(nstr)){rstr[0]="good";var goods_id=$(".goods_no").text().split("：")[1];rstr[1]=goods_id.substring(1);if(rstr[1]=="undefined"){rstr[1]=""}}}}}}if(rstr[0].substr(0,1)=="?"){rstr[0]=strs[3]}else{switch(rstr[0]){case"index":rstr[0]="home";break;case"home":rstr[0]="Member";break}}return rstr}function GetRequest(){var url=location.search;var theRequest=new Object();if(url.indexOf("?")!=-1){var str=url.substr(1);strs=str.split("&");for(var i=0;i<strs.length;i++){theRequest[strs[i].split("=")[0]]=(strs[i].split("=")[1])}}return theRequest}function Guid(g){var arr=new Array();if(typeof(g)=="string"){InitByString(arr,g)}else{InitByOther(arr)}this.Equals=function(o){if(o&&o.IsGuid){return this.ToString()==o.ToString()
}else{return false}};this.IsGuid=function(){};this.ToString=function(format){if(typeof(format)=="string"){if(format=="N"||format=="D"||format=="B"||format=="P"){return ToStringWithFormat(arr,format)}else{return ToStringWithFormat(arr,"D")}}else{return ToStringWithFormat(arr,"D")}};function InitByString(arr,g){g=g.replace(/\{|\(|\)|\}|-/g,"");g=g.toLowerCase();if(g.length!=32||g.search(/[^0-9,a-f]/i)!=-1){InitByOther(arr)}else{for(var i=0;i<g.length;i++){arr.push(g[i])}}}function InitByOther(arr){var i=32;while(i--){arr.push("0")}}function ToStringWithFormat(arr,format){switch(format){case"N":return arr.toString().replace(/,/g,"");case"D":var str=arr.slice(0,8)+"-"+arr.slice(8,12)+"-"+arr.slice(12,16)+"-"+arr.slice(16,20)+"-"+arr.slice(20,32);str=str.replace(/,/g,"");return str;case"B":var str=ToStringWithFormat(arr,"D");str="{"+str+"}";return str;case"P":var str=ToStringWithFormat(arr,"D");str="("+str+")";return str;default:return new Guid()}}}Guid.Empty=new Guid();Guid.NewGuid=function(){var g="";var i=32;while(i--){g+=Math.floor(Math.random()*16).toString(16)}return g};